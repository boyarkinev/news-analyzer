!function(e){var t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=6)}([function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"a",(function(){return s}));class s{constructor(e){n(this,"hide",()=>{this._$el.classList.add("hide")}),n(this,"show",()=>{this._$el.classList.remove("hide")}),this._$el=document.querySelector(e),this.init()}init(){}}},function(e,t,r){"use strict";r.d(t,"c",(function(){return a})),r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return c}));var n={"01":"января","02":"февраля","03":"марта","04":"апреля","05":"мая","06":"июня","07":"июля","08":"августа","09":"сентября",10:"октября",11:"ноября",12:"декабря"};var s={1:"пн",2:"вт",3:"ср",4:"чт",5:"пт",6:"сб",0:"вс"};var i={0:"январь",1:"февраль",2:"март",3:"апрель",4:"май",5:"июнь",6:"июль",7:"август",8:"сентябрь",9:"октябрь",10:"ноябрь",11:"декабрь"};function a(e){const t=e.substr(0,10),r=t.substr(0,4),s=t.substr(5,2);return t.substr(8)+" "+n[s]+", "+r}function o(e){const t=new Date(e),r=t.toISOString().split("T")[0].substr(8),n=t.getDay();return[r]+", "+s[n]}function c(e){const t=new Date(e).getMonth();return i[t]}},function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"a",(function(){return s}));class s{constructor(e){n(this,"init",()=>{let e=[];localStorage.setItem("articles",JSON.stringify(e)),localStorage.setItem("keyWord",JSON.stringify(e))}),n(this,"setArticlesData",e=>{localStorage.setItem("articles",JSON.stringify(e))}),n(this,"setKeyWordData",e=>{localStorage.setItem("keyWord",JSON.stringify(e))}),n(this,"setNewsDate",e=>{localStorage.setItem("newsDate",JSON.stringify(e))}),n(this,"getArticlesData",()=>{if(localStorage.getItem("articles"))return JSON.parse(localStorage.getItem("articles"));this.init()}),n(this,"getKeyWordData",()=>JSON.parse(localStorage.getItem("keyWord"))),n(this,"getNewsDate",()=>JSON.parse(localStorage.getItem("newsDate"))),this._storageTransfer=e}}},function(e,t,r){},,,function(e,t,r){"use strict";r.r(t);r(3);var n={URL_NEWS_API:" https://nomoreparties.co/v2/everything",KEY_NEWS_API:"887a5ec918604f2b9b1a9c9d2a1ae13b",PAGE_SIZE_NEWS_API:100,SORT_BY_NEWS_API:"publishedAt",LANGUAGE_NEWS_API:"ru"};const s=new Date;s.setDate(s.getDate());const i=s.toISOString().split("T")[0];s.setDate(s.getDate()-6);const a=s.toISOString().split("T")[0];class o{constructor(){var e,t,r;r=e=>fetch("".concat(this.url,"?")+"q=".concat(e,"&")+"to=".concat(i,"&")+"from=".concat(a,"&")+"pageSize=".concat(this.pageSize,"&")+"sortBy=".concat(this.sortBy,"&")+"language=".concat(this.language,"&")+"apiKey=".concat(this.apiKey)).then(e=>e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))),(t="getNews")in(e=this)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,this.url=n.URL_NEWS_API,this.apiKey=n.KEY_NEWS_API,this.pageSize=n.PAGE_SIZE_NEWS_API,this.sortBy=n.SORT_BY_NEWS_API,this.language=n.LANGUAGE_NEWS_API}}var c=r(2),l=r(0);class u extends l.a{constructor(e){var t,r,n;super(e),n=()=>{},(r="init")in(t=this)?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n}}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class d extends l.a{constructor(e,t){super(e),h(this,"init",()=>(this._$el.addEventListener("submit",this._submitHandler),this._$el)),h(this,"getInput",()=>this._$el.querySelector("#search-input")),this._submitHandler=t}}var g=r(1);var _=function(e){return null===e?"Описание отсутствует":e.replace(/<[\/]?\w+>/g,"")};class f extends l.a{constructor(e,t){var r,n,s;super(e),s=()=>(this._card=this._$el.content.cloneNode(!0),this._card.querySelector(".news-card__link").href=this._elem.url,this._card.querySelector(".news-card__image").style.backgroundImage="url(".concat(this._elem.urlToImage,")"),this._card.querySelector(".news-card__date").textContent=this._cardTimeStamp(this._elem.publishedAt),this._card.querySelector(".news-card__title").textContent=this._elem.title,this._card.querySelector(".news-card__text").textContent=this._newsTextCorrection(this._elem.description),this._card.querySelector(".news-card__source").textContent=this._elem.source.name,this._card),(n="init")in(r=this)?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s,this._elem=t,this._cardTimeStamp=g.c,this._newsTextCorrection=_}}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class b extends l.a{constructor(e,t){super(e),m(this,"init",e=>{const t=this._newsCard(e);this._$el.append(t)}),m(this,"render",e=>{e.slice(0,3).forEach(e=>this.init(e))}),m(this,"clearing",()=>{this._$el.innerHTML=""}),this._newsCard=t}}class S extends l.a{constructor(e){super(e)}}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class y extends l.a{constructor(e){super(e),p(this,"negativeSearch",()=>{this._messageHeader.textContent="Ничего не найдено",this._messageText.textContent="К сожалению, по вашему запросу ничего не найдено."}),p(this,"connectionTrouble",()=>{this._messageHeader.textContent="Сервер недоступен",this._messageText.textContent="Проверьте сетевое соединение и повторите попытку."}),this._messageHeader=this._$el.querySelector("#negative-answer-header"),this._messageText=this._$el.querySelector("#negative-answer-text")}}const w={wrongLength:"Не пожалейте для меня от 2 до 30 символов :)",notOnlySpace:"Любой запрос прекрасен, если это не пробелы :)"};function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class I{constructor(e){v(this,"init",e=>{this.handlerInputForm=this.handlerInputForm.bind(this),this.submitBtn=this._form.querySelector("#search-button"),this.alert=this._form.querySelector(".alert-message"),this.setEventListeners()}),v(this,"checkInputValidity",e=>{const t=this._form.querySelector(".alert-message");return e.setCustomValidity(""),e.validity.tooShort||e.validity.tooLong?(e.setCustomValidity(w.wrongLength),t.textContent=e.validationMessage,!1):""===e.value.trim()?(e.setCustomValidity(w.notOnlySpace),e.value=e.value.trim(),t.textContent=e.validationMessage,!1):(t.textContent="",e.checkValidity())}),v(this,"setSubmitButtonState",e=>{this.submitBtn.disabled=!e}),v(this,"handlerInputForm",e=>{this.checkInputValidity(e.target),this.setSubmitButtonState(this._form.checkValidity())}),v(this,"setEventListeners",()=>{this._form.addEventListener("input",this.handlerInputForm)}),v(this,"resetFormAlerts",()=>{""!=this.alert.textContent&&(this.alert.textContent="")}),v(this,"resetForms",()=>{this._form.reset()}),this._form=e.init()}}class O extends l.a{constructor(e,t){var r,n,s;super(e),s=()=>{this._$el.addEventListener("click",this._showElseClickHandler)},(n="init")in(r=this)?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s,this._showElseClickHandler=t}}!function(){const e=new c.a,t=new d("#search-form",(function(i){i.preventDefault(),l.clearing(),s.hide(),n.hide(),localStorage.clear(),r.show(),function(){g.setSubmitButtonState(!1);const i=t.getInput().value;h.getNews(i).then(t=>{const o=t.articles;r.hide(),0===o.length?(e.init(),r.hide(),s.hide(),n.show()):(n.hide(),e.setArticlesData(o),e.setKeyWordData(i),e.setNewsDate(_),a.show(),s.show(),l.render(o),g.setSubmitButtonState(!0))}).catch(e=>{console.log(e),r.hide(),n.show(),n.connectionTrouble()})}()})),r=new S("#preloader"),n=new y("#negative-search-message"),s=new u("#search-section"),a=new O("#show-else",(function(t){t.preventDefault(),r.hide();const n=e.getArticlesData(),s=3*(++m-1),i=s+3,o=n.slice(s,i);s+3>=n.length?a.hide():a.show(),l.render(o)})),l=new b(".search-results__list",(...e)=>new f("#news-card-template",...e).init(),a),h=new o,g=new I(t),_=i;g.init(w);let m=1;document.addEventListener("DOMContentLoaded",r=>{r.preventDefault(),e.getArticlesData(),g.resetForms(),g.resetFormAlerts(),0===e.getArticlesData().length||0===e.getKeyWordData().length?s.hide():s.show(),t.init(),a.show(),t.getInput().value=e.getKeyWordData(),l.render(e.getArticlesData().slice(0,3)),0!==t.getInput().value.length?g.setSubmitButtonState(!0):g.setSubmitButtonState(!1)}),a.init()}()}]);