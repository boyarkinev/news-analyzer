!function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return s}));class s{constructor(e){r(this,"hide",()=>{this._$el.classList.add("hide")}),r(this,"show",()=>{this._$el.classList.remove("hide")}),this._$el=document.querySelector(e),this.init()}init(){}}},function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return c}));var r={"01":"января","02":"февраля","03":"марта","04":"апреля","05":"мая","06":"июня","07":"июля","08":"августа","09":"сентября",10:"октября",11:"ноября",12:"декабря"};var s={1:"пн",2:"вт",3:"ср",4:"чт",5:"пт",6:"сб",0:"вс"};var i={0:"январь",1:"февраль",2:"март",3:"апрель",4:"май",5:"июнь",6:"июль",7:"август",8:"сентябрь",9:"октябрь",10:"ноябрь",11:"декабрь"};function a(e){const t=e.substr(0,10),n=t.substr(0,4),s=t.substr(5,2);return t.substr(8)+" "+r[s]+", "+n}function o(e){const t=new Date(e),n=t.toISOString().split("T")[0].substr(8),r=t.getDay();return[n]+", "+s[r]}function c(e){const t=new Date(e).getMonth();return i[t]}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return s}));class s{constructor(e){r(this,"init",()=>{const e=[];localStorage.setItem("articles",JSON.stringify(e)),localStorage.setItem("keyWord",JSON.stringify(e))}),r(this,"setArticlesData",e=>{localStorage.setItem("articles",JSON.stringify(e))}),r(this,"setKeyWordData",e=>{localStorage.setItem("keyWord",JSON.stringify(e))}),r(this,"setNewsDate",e=>{localStorage.setItem("newsDate",JSON.stringify(e))}),r(this,"getArticlesData",()=>{if(localStorage.getItem("articles"))return JSON.parse(localStorage.getItem("articles"));this.init()}),r(this,"getKeyWordData",()=>JSON.parse(localStorage.getItem("keyWord"))),r(this,"getNewsDate",()=>JSON.parse(localStorage.getItem("newsDate"))),this._storageTransfer=e}}},function(e,t,n){},,,function(e,t,n){"use strict";n.r(t);n(3);var r={URL_NEWS_API:"https://nomoreparties.co/news/v2/everything",KEY_NEWS_API:"887a5ec918604f2b9b1a9c9d2a1ae13b",PAGE_SIZE_NEWS_API:100,SORT_BY_NEWS_API:"publishedAt",LANGUAGE_NEWS_API:"ru"};const s=new Date;s.setDate(s.getDate());const i=s.toISOString().split("T")[0];s.setDate(s.getDate()-6);const a=s.toISOString().split("T")[0];class o{constructor(){var e,t,n;n=e=>fetch("".concat(this.url,"?")+"q=".concat(e,"&")+"to=".concat(i,"&")+"from=".concat(a,"&")+"pageSize=".concat(this.pageSize,"&")+"sortBy=".concat(this.sortBy,"&")+"language=".concat(this.language,"&")+"apiKey=".concat(this.apiKey)).then(e=>e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))),(t="getNews")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,this.url=r.URL_NEWS_API,this.apiKey=r.KEY_NEWS_API,this.pageSize=r.PAGE_SIZE_NEWS_API,this.sortBy=r.SORT_BY_NEWS_API,this.language=r.LANGUAGE_NEWS_API}}var c=n(2),l=n(0);class u extends l.a{constructor(e){var t,n,r;super(e),r=()=>{},(n="init")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class d extends l.a{constructor(e,t){super(e),h(this,"init",()=>(this._$el.addEventListener("submit",this._submitHandler),this._$el)),h(this,"getInput",()=>this._$el.querySelector("#search-input")),this._submitHandler=t}}var g=n(1);var _=function(e){return null===e?"Описание отсутствует":e.replace(/<[\/]?\w+>/g,"")};class f extends l.a{constructor(e,t){var n,r,s;super(e),s=()=>(this._card=this._$el.content.cloneNode(!0),this._card.querySelector(".news-card__link").href=this._elem.url,this._card.querySelector(".news-card__image").style.backgroundImage="url(".concat(this._elem.urlToImage,")"),this._card.querySelector(".news-card__date").textContent=this._cardTimeStamp(this._elem.publishedAt),this._card.querySelector(".news-card__title").textContent=this._elem.title,this._card.querySelector(".news-card__text").textContent=this._newsTextCorrection(this._elem.description),this._card.querySelector(".news-card__source").textContent=this._elem.source.name,this._card),(r="init")in(n=this)?Object.defineProperty(n,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[r]=s,this._elem=t,this._cardTimeStamp=g.c,this._newsTextCorrection=_}}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class b extends l.a{constructor(e,t){super(e),m(this,"init",e=>{const t=this._newsCard(e);this._$el.append(t)}),m(this,"render",e=>{e.slice(0,3).forEach(e=>this.init(e))}),m(this,"clearing",()=>{this._$el.innerHTML=""}),this._newsCard=t}}class S extends l.a{constructor(e){super(e)}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class y extends l.a{constructor(e){super(e),p(this,"negativeSearch",()=>{this._messageHeader.textContent="Ничего не найдено",this._messageText.textContent="К сожалению, по вашему запросу ничего не найдено."}),p(this,"connectionTrouble",()=>{this._messageHeader.textContent="Сервер недоступен",this._messageText.textContent="Проверьте сетевое соединение и повторите попытку."}),this._messageHeader=this._$el.querySelector("#negative-answer-header"),this._messageText=this._$el.querySelector("#negative-answer-text")}}const w={empty:"Это обязательное поле",wrongLength:"Введите от 2 до 30 символов",notOnlySpace:"Нужно что-то кроме пробелов"};function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class I{constructor(e){v(this,"init",e=>{this.handlerInputForm=this.handlerInputForm.bind(this),this.submitBtn=this._form.querySelector("#search-button"),this.alert=this._form.querySelector(".alert-message"),this.setEventListeners()}),v(this,"checkInputValidity",e=>{const t=this._form.querySelector(".alert-message");return e.setCustomValidity(""),e.validity.valueMissing?(e.setCustomValidity(this.errorMessages.empty),t.textContent=e.validationMessage,!1):e.validity.tooShort||e.validity.tooLong?(e.setCustomValidity(w.wrongLength),t.textContent=e.validationMessage,!1):""===e.value.trim()?(e.setCustomValidity(w.notOnlySpace),e.value=e.value.trim(),t.textContent=e.validationMessage,!1):(t.textContent="",e.checkValidity())}),v(this,"setSubmitButtonState",e=>{this.submitBtn.disabled=!e}),v(this,"handlerInputForm",e=>{this.checkInputValidity(e.target),this.setSubmitButtonState(this._form.checkValidity())}),v(this,"setEventListeners",()=>{this._form.addEventListener("input",this.handlerInputForm)}),v(this,"resetFormAlerts",()=>{""!=this.alert.textContent&&(this.alert.textContent="")}),v(this,"resetForms",()=>{this._form.reset()}),this._form=e.init()}}class x extends l.a{constructor(e,t){var n,r,s;super(e),s=()=>{this._$el.addEventListener("click",this._showElseClickHandler)},(r="init")in(n=this)?Object.defineProperty(n,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[r]=s,this._showElseClickHandler=t}}!function(){const e=new c.a,t=new d("#search-form",(function(i){i.preventDefault(),l.clearing(),s.hide(),r.hide(),localStorage.clear(),n.show(),function(){g.setSubmitButtonState(!1);const i=t.getInput().value;h.getNews(i).then(t=>{const o=t.articles;n.hide(),0===o.length?(e.init(),n.hide(),s.hide(),r.show()):(r.hide(),e.setArticlesData(o),e.setKeyWordData(i),e.setNewsDate(_),a.show(),s.show(),l.render(o),g.setSubmitButtonState(!0))}).catch(e=>{console.log(e),n.hide(),r.show(),r.connectionTrouble()})}()})),n=new S("#preloader"),r=new y("#negative-search-message"),s=new u("#search-section"),a=new x("#show-else",(function(t){t.preventDefault(),n.hide();const r=e.getArticlesData(),s=3*(++m-1),i=s+3,o=r.slice(s,i);s+3>=r.length?a.hide():a.show(),l.render(o)})),l=new b(".search-results__list",(...e)=>new f("#news-card-template",...e).init(),a),h=new o,g=new I(t),_=i;g.init(w);let m=1;document.addEventListener("DOMContentLoaded",n=>{n.preventDefault(),e.getArticlesData(),g.resetForms(),g.resetFormAlerts(),0===e.getArticlesData().length||0===e.getKeyWordData().length?s.hide():s.show(),t.init(),a.show(),t.getInput().value=e.getKeyWordData(),l.render(e.getArticlesData().slice(0,3)),0!==t.getInput().value.length?g.setSubmitButtonState(!0):g.setSubmitButtonState(!1)}),a.init()}()}]);